<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reglamento de Convenios Colectivos - SUTERH & UPSRA</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="print-helper.js"></script>
</head>
<body>
    <div class="book-container">
        <!-- Portada Profesional -->
        <section class="cover">
            <div class="cover-header">
                <div class="logo-section">
                    <div class="logo-placeholder">üè¢</div>
                </div>
                <h1>REGLAMENTO INTERNO</h1>
                <h2>Convenios Colectivos de Trabajo</h2>
                <div class="unions">
                    <span class="union-badge">SUTERH</span>
                    <span class="union-badge">UPSRA</span>
                </div>
            </div>
            
            <div class="cover-content">
                <h3>Procedimientos, Protocolos y Sanciones</h3>
                <p class="description">
                    Manual completo de reglamentaci√≥n laboral para personal de edificios, 
                    incluyendo conserjes, mantenimiento, valet parking, vigiladores y supervisores.
                </p>
                
                <div class="cover-details">
                    <div class="detail-item">
                        <strong>Versi√≥n:</strong> 1.0
                    </div>
                    <div class="detail-item">
                        <strong>Fecha:</strong> junio 2025
                    </div>
                    <div class="detail-item">
                        <strong>Distribuci√≥n:</strong> Gratuita
                    </div>
                </div>
            </div>
            
            <div class="cover-footer">
                <p class="disclaimer">
                    Este documento es de distribuci√≥n gratuita y contiene informaci√≥n 
                    basada en los convenios colectivos oficiales vigentes.
                </p>
            </div>
        </section>

        <!-- Botones de Acci√≥n -->
        <section class="action-buttons">
            <div class="button-group">
                <button onclick="printDocument()" class="btn btn-primary">
                    üñ®Ô∏è Imprimir Documento
                </button>
                <button onclick="downloadPDF()" class="btn btn-secondary">
                    üìÑ Descargar PDF Completo
                </button>
                <button onclick="downloadSectionPDF()" class="btn btn-outline">
                    üìã Descargar por Secciones
                </button>
            </div>
        </section>

        <!-- √çndice -->
        <section class="index">
            <h2>√çndice del Reglamento</h2>
            <ol>
                <li><a href="gerente-del-edificio.html">üìã Gu√≠a para Gerentes y Coordinadores</a></li>
                <li>Convenio SUTERH
                    <ol>
                        <li><a href="suterh-intro.html">üìñ Introducci√≥n SUTERH</a></li>
                        <li><a href="suterh-mantenimiento.html">üîß Cap√≠tulo 1: Personal de Mantenimiento</a></li>
                        <li><a href="suterh-conserje.html">üè¢ Cap√≠tulo 2: Conserjes</a></li>
                        <li><a href="coordinador-conserjeria.html">üë• Cap√≠tulo 3: Coordinador de Conserjer√≠a</a></li>
                        <li><a href="bellboy.html">üõéÔ∏è Cap√≠tulo 4: Bellboys</a></li>
                        <li><a href="suterh-valet.html">üöó Cap√≠tulo 5: Valet Parking</a></li>
                    </ol>
                </li>
                <li>Convenio UPSRA
                    <ol>
                        <li><a href="upsra-intro.html">üìñ Introducci√≥n UPSRA</a></li>
                        <li><a href="upsra-vigilador.html">üëÆ Cap√≠tulo 1: Vigiladores</a></li>
                        <li><a href="upsra-supervisor.html">üë®‚Äçüíº Cap√≠tulo 2: Supervisores</a></li>
                        <li><a href="monitoreo.html">üìπ Cap√≠tulo 3: Personal de Monitoreo</a></li>
                    </ol>
                </li>
                <li><a href="anexos.html">üìé Anexos y Material Complementario</a></li>
            </ol>
        </section>

        <section class="welcome">
            <h2>Bienvenido al Reglamento</h2>
            <p>Este documento digital re√∫ne y organiza los convenios colectivos de trabajo de SUTERH y UPSRA, 
            estructurados por roles y funciones espec√≠ficas. Incluye procedimientos detallados, protocolos 
            de seguridad, y el r√©gimen completo de sanciones para cada puesto.</p>
            
            <div class="features">
                <div class="feature">
                    <h4>üìã Informaci√≥n Completa</h4>
                    <p>Todos los art√≠culos relevantes de los convenios oficiales</p>
                </div>
                <div class="feature">
                    <h4>‚öñÔ∏è Sanciones Detalladas</h4>
                    <p>Fundamentos legales y consecuencias espec√≠ficas</p>
                </div>
                <div class="feature">
                    <h4>üîÑ Procedimientos</h4>
                    <p>Protocolos claros para cada situaci√≥n laboral</p>
                </div>
            </div>
        </section>
    </div>

    <script>
        function printDocument() {
            // Funci√≥n mejorada de impresi√≥n con m√∫ltiples fallbacks
            if (window.enhancedPrint) {
                // Usar la funci√≥n mejorada si est√° disponible
                window.enhancedPrint()
                    .then(result => {
                        console.log('Impresi√≥n exitosa:', result);
                    })
                    .catch(error => {
                        console.error('Error con enhancedPrint:', error);
                        fallbackPrint();
                    });
            } else {
                // Fallback a la funci√≥n b√°sica
                try {
                    // Forzar la aplicaci√≥n de estilos de impresi√≥n
                    document.body.style.background = 'white';
                    document.body.style.color = 'black';
                    
                    // Esperar un momento para que los estilos se apliquen
                    setTimeout(function() {
                        // Intentar imprimir
                        if (window.print) {
                            window.print();
                        } else {
                            // Fallback para navegadores que no soportan window.print
                            alert('La funci√≥n de impresi√≥n no est√° disponible en este navegador. Por favor use Ctrl+P (Cmd+P en Mac) para imprimir.');
                        }
                    }, 100);
                } catch (error) {
                    console.error('Error al imprimir:', error);
                    alert('Error al imprimir. Por favor use Ctrl+P (Cmd+P en Mac) para imprimir manualmente.');
                }
            }
        }
        
        function fallbackPrint() {
            alert('Para imprimir este documento:\n\n1. Presione Ctrl+P (Windows) o Cmd+P (Mac)\n2. Configure las opciones de impresi√≥n\n3. Seleccione "Imprimir"\n\nO use la funci√≥n "Descargar PDF" como alternativa.');
        }

        function downloadPDF() {
            const element = document.querySelector('.book-container');
            const opt = {
                margin: 1,
                filename: 'Reglamento_Convenios_SUTERH_UPSRA.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
            };
            
            html2pdf().set(opt).from(element).save();
        }

        function downloadSectionPDF() {
            const sections = [
                { name: 'Guia_Gerentes', url: 'gerente-del-edificio.html' },
                { name: 'SUTERH_Mantenimiento', url: 'suterh-mantenimiento.html' },
                { name: 'SUTERH_Conserjes', url: 'suterh-conserje.html' },
                { name: 'SUTERH_Coordinador', url: 'coordinador-conserjeria.html' },
                { name: 'SUTERH_Valet', url: 'suterh-valet.html' },
                { name: 'UPSRA_Vigiladores', url: 'upsra-vigilador.html' },
                { name: 'UPSRA_Supervisores', url: 'upsra-supervisor.html' },
                { name: 'UPSRA_Monitoreo', url: 'monitoreo.html' }
            ];

            alert('Funci√≥n de descarga por secciones en desarrollo. Por favor use "Descargar PDF Completo" para obtener todo el documento.');
        }
        
        // Agregar evento para detectar si la impresi√≥n fue cancelada
        window.addEventListener('afterprint', function() {
            console.log('Impresi√≥n completada');
        });
        
        // Agregar evento para detectar errores de impresi√≥n
        window.addEventListener('error', function(e) {
            console.error('Error en la p√°gina:', e);
        });
        
        // Agregar atajo de teclado para impresi√≥n
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
                e.preventDefault();
                printDocument();
            }
        });
    </script>
</body>
</html> 